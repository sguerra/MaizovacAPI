# Use $POSTGRES_USER/$POSTGRES_PASSWORD user/password credentials
version: '3.1'

services:
    api:
        build: .
        image: maizovac-api
        environment: 
            PORT: $PORT
            DB_CONNECTION_STRING: $DB_CONNECTION_STRING
        ports:
            - 3000:3000

        stdin_open: true
        tty: true
        networks:
            - db
    db:
        image: postgres:latest
        restart: always
        ports:
        - 5432:5432
        environment:
            POSTGRES_USER: $POSTGRES_USER
            POSTGRES_PASSWORD: $POSTGRES_PASSWORD
            POSTGRES_DB: $POSTGRES_DB
        networks:
            - db

    adminer:
        image: adminer
        restart: always
        ports:
        - 8080:8080

networks:
    db: